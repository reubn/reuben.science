<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="apple-touch-icon" sizes="57x57" href="/favicon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/favicon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/favicon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/favicon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/favicon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/favicon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/favicon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/favicon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png"/><link rel="icon" type="image/svg+xml" href="/favicon.svg"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png"/><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><meta name="msapplication-TileImage" content="/favicon-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><meta name="theme-color" content="#0E151B"/><link rel="alternate" type="application/rss+xml" href="https://reuben.science/undefined"/><noscript><style>[data-noscript="no"]{display: none!important}</style></noscript><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@_reubn"/><meta name="twitter:creator" content="@_reubn"/><meta property="og:image" content="https://reuben.science/og.png"/><meta property="og:image:alt" content="reuben.science"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:locale" content="en_GB"/><title>Cloudflare Dynamic DNS | Reuben</title><meta name="robots" content="index,follow"/><meta name="description" content="Bash Script to Update Cloudflare DNS Records"/><meta property="og:title" content="Cloudflare Dynamic DNS"/><meta property="og:description" content="Bash Script to Update Cloudflare DNS Records"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2021-07-28T00:00:00.000Z"/><meta property="article:author" content="Reuben"/><meta property="og:site_name" content="reuben.science"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://reuben.science/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://reuben.science/snippets","name":"Snippets"}},{"@type":"ListItem","position":3,"item":{"@id":"https://reuben.science/snippets/cloudflare-ddns","name":"Cloudflare Dynamic DNS"}}]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","datePublished":"2021-07-28T00:00:00.000Z","description":"Bash Script to Update Cloudflare DNS Records","mainEntityOfPage":{"@type":"WebPage"},"headline":"Cloudflare Dynamic DNS","dateModified":"2021-07-28T00:00:00.000Z","author":[{"@type":"Person","name":"Reuben"}],"publisher":{"@type":"Organization","name":"Reuben"}}</script><meta name="next-head-count" content="42"/><link rel="preload" href="/_next/static/css/afe089ed539cf8cc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/afe089ed539cf8cc.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f231805434d8285f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f231805434d8285f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-96acd64d7581dd8d.js" defer=""></script><script src="/_next/static/chunks/framework-ca097c935992717b.js" defer=""></script><script src="/_next/static/chunks/main-14746a226a42b8b5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1e10b67cf77d2916.js" defer=""></script><script src="/_next/static/chunks/5152-b41aacfb98ba7eb0.js" defer=""></script><script src="/_next/static/chunks/9589-40fe8c61e5043e9f.js" defer=""></script><script src="/_next/static/chunks/pages/snippets/%5Bslug%5D-45f558f117b0919d.js" defer=""></script><script src="/_next/static/6XtY5hUMv6s9W_W2fChEe/_buildManifest.js" defer=""></script><script src="/_next/static/6XtY5hUMv6s9W_W2fChEe/_ssgManifest.js" defer=""></script><script src="/_next/static/6XtY5hUMv6s9W_W2fChEe/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><section class="_app_app__jrTHQ"><header class="styles_header__bd3ZT"><svg role="banner" class="styles_logo__OPbWM  styles_svg__qyW1z" viewBox="0 0 994 994"><defs><linearGradient x1="0%" y1="0%" x2="99.9884439%" y2="99.9884439%" id="orange"><stop stop-color="hsl(14, 100%, 61%)" offset="0.0115561319%"></stop><stop stop-color="hsl(32, 97%, 57%)" offset="100%"></stop></linearGradient><linearGradient x1="100%" y1="100%" x2="0%" y2="0%" id="yellow"><stop stop-color="hsl(56, 97%, 57%)" offset="0%"></stop><stop stop-color="hsl(51, 100%, 61%)" offset="100%"></stop></linearGradient><linearGradient x1="8.8817842e-14%" y1="8.8817842e-14%" x2="100%" y2="100%" id="red"><stop stop-color="hsl(0, 100%, 66%)" offset="0%"></stop><stop stop-color="hsl(0, 97%, 57%)" offset="100%"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="blue"><stop stop-color="hsl(180, 90%, 48%)" offset="0%"></stop><stop stop-color="hsl(201, 97%, 50%)" offset="100%"></stop></linearGradient><linearGradient x1="0%" y1="-1.77635684e-13%" x2="100%" y2="100%" id="purple"><stop stop-color="hsl(244, 100%, 66%)" offset="0%"></stop><stop stop-color="hsl(274, 97%, 57%)" offset="100%"></stop></linearGradient><linearGradient x1="100%" y1="100%" x2="-7.10542736e-13%" y2="7.10542736e-13%" id="green"><stop stop-color="hsl(117, 100%, 66%)" offset="0%"></stop><stop stop-color="hsl(158, 97%, 57%)" offset="100%"></stop></linearGradient></defs><g><g transform="translate(-565.000000, -233.000000)"><g transform="translate(1062.000000, 730.000000) rotate(-45.000000) translate(-1062.000000, -730.000000) translate(712.000000, 378.000000)"><path d="M400,20.0660172 L400,230.066017 C400,241.111712 391.045695,250.066017 380,250.066017 L270,250.066017 C258.954305,250.066017 250,259.020322 250,270.066017 L250,280.066017 C250,291.111712 258.954305,300.066017 270,300.066017 L680,300.066017 C691.045695,300.066017 700,309.020322 700,320.066017 L700,680.066017 C700,691.111712 691.045695,700.066017 680,700.066017 L320,700.066017 C308.954305,700.066017 300,691.111712 300,680.066017 L300,620.066017 C300,609.020322 308.954305,600.066017 320,600.066017 L580,600.066017 C591.045695,600.066017 600,591.111712 600,580.066017 L600,570.066017 C600,559.020322 591.045695,550.066017 580,550.066017 L320,550.066017 C308.954305,550.066017 300,541.111712 300,530.066017 L300,470.066017 C300,459.020322 308.954305,450.066017 320,450.066017 L580,450.066017 C591.045695,450.066017 600,441.111712 600,430.066017 L600,420.066017 C600,409.020322 591.045695,400.066017 580,400.066017 L170,400.066017 C158.954305,400.066017 150,391.111712 150,380.066017 L150,170.066017 C150,159.020322 158.954305,150.066017 170,150.066017 L280,150.066017 C291.045695,150.066017 300,141.111712 300,130.066017 L300,120.066017 C300,109.020322 291.045695,100.066017 280,100.066017 L120,100.066017 C108.954305,100.066017 100,109.020322 100,120.066017 L100,380.066017 C100,391.111712 91.045695,400.066017 80,400.066017 L20,400.066017 C8.954305,400.066017 1.3527075e-15,391.111712 0,380.066017 L0,20.0660172 C-1.3527075e-15,9.02032218 8.954305,0.066017178 20,0.066017178 L380,0.066017178 C391.045695,0.066017178 400,9.02032218 400,20.0660172 Z" class="styles_type__1rWKD styles_lodFlat__ofLbh"></path><g transform="translate(0.000000, 0.066017)"><g transform="translate(449.933983, 0.000000)"><rect class="styles_square__SJD5V styles_lodFlat__ofLbh styles_t1__L_QSS styles_dim__UTcnE" x="0.066017178" y="0" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodFlat__ofLbh styles_t2__ryFqt styles_dim__UTcnE" x="2.84217094e-14" y="149.93" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodFlat__ofLbh styles_t3__LXXuQ styles_dim__UTcnE" x="150" y="149.93" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodRainbowGradient__3y0nV styles_t1__L_QSS undefined styles_interactive__0vH_3 " x="0.066017178" y="0" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodRainbowGradient__3y0nV styles_t2__ryFqt undefined styles_interactive__0vH_3 " x="2.84217094e-14" y="149.93" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodRainbowGradient__3y0nV styles_t3__LXXuQ undefined styles_interactive__0vH_3 " x="150" y="149.93" rx="20px"></rect></g><g transform="translate(0.000000, 452.933983)"><rect class="styles_square__SJD5V styles_lodFlat__ofLbh styles_b1__Xrrmn styles_dim__UTcnE" x="5.68434189e-14" y="0.066017178" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodFlat__ofLbh styles_b2__iImSA styles_dim__UTcnE" x="150.066017" y="1.13686838e-13" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodFlat__ofLbh styles_b3__tHvPP styles_dim__UTcnE" x="149.933983" y="149.996017" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodRainbowGradient__3y0nV styles_b1__Xrrmn undefined styles_interactive__0vH_3 " x="5.68434189e-14" y="0.066017178" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodRainbowGradient__3y0nV styles_b2__iImSA undefined styles_interactive__0vH_3 " x="150.066017" y="1.13686838e-13" rx="20px"></rect><rect class="styles_square__SJD5V styles_lodRainbowGradient__3y0nV styles_b3__tHvPP undefined styles_interactive__0vH_3 " x="149.933983" y="149.996017" rx="20px"></rect></g></g></g></g></g></svg><nav class="styles_nav__P985N"><a aria-hidden="true" tabindex="-1" class="styles_link__WDwlV  styles_secret__RCFAg false" style="--link-underline:linear-gradient(135deg, var(--colours-green) 0%, var(--colours-green-hint) 100%)" href="/nowhere"></a><a class="styles_link__WDwlV " style="--link-underline:linear-gradient(135deg, var(--colours-pink-red) 0%, var(--colours-pink-red-hint) 100%)" href="/">Home</a><a class="styles_link__WDwlV " style="--link-underline:linear-gradient(135deg, var(--colours-blue) 0%, var(--colours-blue-hint) 100%)" href="/posts">Posts</a><a class="styles_link__WDwlV " style="--link-underline:linear-gradient(135deg, var(--colours-indigo) 0%, var(--colours-indigo-hint) 100%)" href="/snippets">Snippets</a></nav></header><main class="_app_content__N_c_N"><article class="styles_post__sCWlT"><h1 class="styles_title__qipDA">Cloudflare Dynamic DNS</h1><span class="styles_info__nt0yU"><time dateTime="7/28/2021">7/28/2021</time><span>143<!-- --> line<!-- -->s<!-- --></span></span><div class="styles_body__FFHV7"><!--$-->
<!-- -->
<!-- --><p>Small <!-- --><code>bash</code> script to dynamically update Cloudflare <!-- --><code>DNS</code> records to the current external <!-- --><code>IP</code> addresses.<!-- --></p>
<!-- --><ul>
<!-- --><li>Supports both <!-- --><code>IPv4</code> and <!-- --><code>IPv6</code>: <!-- --><code>A</code> and <!-- --><code>AAAA</code></li>
<!-- --><li>Multi-source comparison (prevents against source poisoning/failure)</li>
<!-- --><li>Cloudflare API v4</li>
<!-- --><li>Configurable</li>
<!-- --></ul>
<!-- --><pre><span><button class="clickToCopy" onmousedown="COPY_FN(event)" onmouseup="CLEAR_FN(event)">Copy</button></span><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<!-- --><span class="token comment"># https://reuben.science</span>

<!-- --><span class="token assign-left variable">red</span><span class="token operator">=</span><span class="token string">&#x27;\033[1;31m&#x27;</span>
<!-- --><span class="token assign-left variable">yellow</span><span class="token operator">=</span><span class="token string">&#x27;\033[1;33m&#x27;</span>
<!-- --><span class="token assign-left variable">green</span><span class="token operator">=</span><span class="token string">&#x27;\033[1;32m&#x27;</span>
<!-- --><span class="token assign-left variable">purple</span><span class="token operator">=</span><span class="token string">&#x27;\033[1;35m&#x27;</span>
<!-- --><span class="token assign-left variable">reset</span><span class="token operator">=</span><span class="token string">&#x27;\033[0m&#x27;</span>

<!-- --><span class="token comment"># Cloudflare Zone ID - copy from Cloudflare DNS page</span>
<!-- --><span class="token assign-left variable">ZONE_ID</span><span class="token operator">=</span>979f5e5c765123d539fad5e744d3fd10

<!-- --><span class="token comment"># Full domain to be updated</span>
<!-- --><span class="token assign-left variable">DNS_RECORD</span><span class="token operator">=</span>reuben.science

<!-- --><span class="token comment"># Cloudflare Token - scoped for write access to the desired Zone.Zone, Zone.DNS</span>
<!-- --><span class="token assign-left variable">CLOUDFLARE_TOKEN</span><span class="token operator">=</span>6ktwpvFqyn5U0m0SBEyLt2nPQzSTLy3K_TLZVfXi

<!-- --><span class="token comment"># How many IP addresses must agree, in order for the result to be used?</span>
<!-- --><span class="token assign-left variable">IPv4_THRESHOLD</span><span class="token operator">=</span><span class="token number">3</span>
<!-- --><span class="token assign-left variable">IPv6_THRESHOLD</span><span class="token operator">=</span><span class="token number">3</span>

<!-- --><span class="token comment"># Get the current external IP addresses</span>
<!-- --><span class="token assign-left variable">IPv4</span><span class="token operator">=</span><span class="token punctuation">(</span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://api.ipify.org<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://ipv4.wtfismyip.com/text<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://api4.my-ip.io/ip<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://v4.ipv6-test.com/api/myip.php<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://ipv4.lookup.test-ipv6.com/ <!-- --><span class="token operator">|</span> <!-- --><span class="token function">jq</span><span class="token argument"> -r</span> <!-- --><span class="token string">&#x27;.ip&#x27;</span><span class="token variable-symbols">)</span></span>
<!-- --><span class="token punctuation">)</span>

<!-- --><span class="token assign-left variable">IPv6</span><span class="token operator">=</span><span class="token punctuation">(</span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://api6.ipify.org<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://ipv6.wtfismyip.com/text<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://api6.my-ip.io/ip<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://v6.ipv6-test.com/api/myip.php<!-- --><span class="token variable-symbols">)</span></span>
  <!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -m</span> <!-- --><span class="token number">4</span> https://ipv6.lookup.test-ipv6.com/ <!-- --><span class="token operator">|</span> <!-- --><span class="token function">jq</span><span class="token argument"> -r</span> <!-- --><span class="token string">&#x27;.ip&#x27;</span><span class="token variable-symbols">)</span></span>
<!-- --><span class="token punctuation">)</span>

<!-- --><span class="token comment"># Pass Results to awk</span>
<!-- --><span class="token assign-left variable">IPv4_AWK</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable-symbols">$(</span><span class="token builtin class-name">printf</span> <!-- --><span class="token string">&#x27;%s\n&#x27;</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable"><span class="token variable-symbols">${IPv4</span><span class="token punctuation">[</span>@<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">awk</span> &#x27; <!-- --><span class="token punctuation">\</span>
  BEGIN <!-- --><span class="token punctuation">{</span>va <!-- --><span class="token operator">=</span> <!-- --><span class="token number">0</span><span class="token punctuation">;</span> max <!-- --><span class="token operator">=</span> <!-- --><span class="token number">0</span><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
  max <!-- --><span class="token operator">&lt;</span> ++c<!-- --><span class="token punctuation">[</span>$0<!-- --><span class="token punctuation">]</span> <!-- --><span class="token punctuation">{</span>if<!-- --><span class="token punctuation">(</span>length<!-- --><span class="token punctuation">(</span>$0<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">!=</span> <!-- --><span class="token number">0</span><span class="token variable-symbols">)</span></span><span class="token punctuation">{</span>max <!-- --><span class="token operator">=</span> c<!-- --><span class="token punctuation">[</span><span class="token variable simple">$0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> addr <!-- --><span class="token operator">=</span> <!-- --><span class="token variable simple">$0</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
  <!-- --><span class="token punctuation">{</span>if<!-- --><span class="token punctuation">(</span>length<!-- --><span class="token punctuation">(</span><span class="token variable simple">$0</span><span class="token punctuation">)</span> <!-- --><span class="token operator">!=</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>va <!-- --><span class="token operator">=</span> ++va<!-- --><span class="token punctuation">}</span><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
  END <!-- --><span class="token punctuation">{</span>print <!-- --><span class="token punctuation">(</span>length<!-- --><span class="token punctuation">(</span>addr<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">!=</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span> ? addr : <!-- --><span class="token string">&quot;NULL&quot;</span>, va, max, NR<!-- --><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
&#x27;<!-- --><span class="token punctuation">))</span>

<!-- --><span class="token assign-left variable">IPv6_AWK</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable-symbols">$(</span><span class="token builtin class-name">printf</span> <!-- --><span class="token string">&#x27;%s\n&#x27;</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable"><span class="token variable-symbols">${IPv6</span><span class="token punctuation">[</span>@<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">awk</span> &#x27; <!-- --><span class="token punctuation">\</span>
  BEGIN <!-- --><span class="token punctuation">{</span>va <!-- --><span class="token operator">=</span> <!-- --><span class="token number">0</span><span class="token punctuation">;</span> max <!-- --><span class="token operator">=</span> <!-- --><span class="token number">0</span><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
  max <!-- --><span class="token operator">&lt;</span> ++c<!-- --><span class="token punctuation">[</span>$0<!-- --><span class="token punctuation">]</span> <!-- --><span class="token punctuation">{</span>if<!-- --><span class="token punctuation">(</span>length<!-- --><span class="token punctuation">(</span>$0<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">!=</span> <!-- --><span class="token number">0</span><span class="token variable-symbols">)</span></span><span class="token punctuation">{</span>max <!-- --><span class="token operator">=</span> c<!-- --><span class="token punctuation">[</span><span class="token variable simple">$0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> addr <!-- --><span class="token operator">=</span> <!-- --><span class="token variable simple">$0</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
  <!-- --><span class="token punctuation">{</span>if<!-- --><span class="token punctuation">(</span>length<!-- --><span class="token punctuation">(</span><span class="token variable simple">$0</span><span class="token punctuation">)</span> <!-- --><span class="token operator">!=</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>va <!-- --><span class="token operator">=</span> ++va<!-- --><span class="token punctuation">}</span><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
  END <!-- --><span class="token punctuation">{</span>print <!-- --><span class="token punctuation">(</span>length<!-- --><span class="token punctuation">(</span>addr<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">!=</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span> ? addr : <!-- --><span class="token string">&quot;NULL&quot;</span>, va, max, NR<!-- --><span class="token punctuation">}</span> <!-- --><span class="token punctuation">\</span>
&#x27;<!-- --><span class="token punctuation">))</span>

<!-- --><span class="token comment"># Get the most common value for each service, ignoring empty responses</span>
<!-- --><span class="token assign-left variable">IPv4_ADDR</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv4_AWK</span><span class="token punctuation">[</span>0<!-- --><span class="token punctuation">]</span><span class="token operator">/</span>NULL<!-- --><span class="token operator">/</span><span class="token variable-symbols">}</span></span>
<!-- --><span class="token assign-left variable">IPv6_ADDR</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv6_AWK</span><span class="token punctuation">[</span>0<!-- --><span class="token punctuation">]</span><span class="token operator">/</span>NULL<!-- --><span class="token operator">/</span><span class="token variable-symbols">}</span></span>

<!-- --><span class="token comment"># How many services returned addresses?</span>
<!-- --><span class="token assign-left variable">IPv4_RETURNED</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv4_AWK</span><span class="token punctuation">[</span>1<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>
<!-- --><span class="token assign-left variable">IPv6_RETURNED</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv6_AWK</span><span class="token punctuation">[</span>1<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>

<!-- --><span class="token comment"># How many services agreed?</span>
<!-- --><span class="token assign-left variable">IPv4_AGREED</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv4_AWK</span><span class="token punctuation">[</span>2<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>
<!-- --><span class="token assign-left variable">IPv6_AGREED</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv6_AWK</span><span class="token punctuation">[</span>2<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>

<!-- --><span class="token comment"># How many services in total?</span>
<!-- --><span class="token assign-left variable">IPv4_TOTAL</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv4_AWK</span><span class="token punctuation">[</span>3<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>
<!-- --><span class="token assign-left variable">IPv6_TOTAL</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">${IPv6_AWK</span><span class="token punctuation">[</span>3<!-- --><span class="token punctuation">]</span><span class="token variable-symbols">}</span></span>

<!-- --><span class="token comment"># Successful?</span>
<!-- --><span class="token assign-left variable">IPv4_SUCCESS</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<!-- --><span class="token assign-left variable">IPv6_SUCCESS</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>

<!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span><span class="token argument"> -z</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable simple">$IPv4_ADDR</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">]</span>
<!-- --><span class="token keyword">then</span>
  <!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable"><span class="token variable-symbols">${red</span><span class="token variable-symbols">}</span></span>No IPv4 Address Found<!-- --><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<!-- --><span class="token keyword">elif</span> <!-- --><span class="token punctuation">[</span> &quot;<!-- --><span class="token variable"><span class="token variable-symbols">$((</span>IPv4_AGREED<!-- --><span class="token variable-symbols">))</span></span><span class="token string">&quot; -ge &quot;</span><span class="token variable"><span class="token variable-symbols">$((</span>IPv4_THRESHOLD<!-- --><span class="token variable-symbols">))</span></span>&quot; <!-- --><span class="token punctuation">]</span> <!-- --><span class="token comment"># Protect against poisoned data</span>
<!-- --><span class="token keyword">then</span>
	<!-- --><span class="token assign-left variable">DNS_RECORDIDv4</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span> <!-- --><span class="token string">&quot;https://api.cloudflare.com/client/v4/zones/<!-- --><span class="token variable simple">$ZONE_ID</span>/dns_records?type=A&amp;name=<!-- --><span class="token variable simple">$DNS_RECORD</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
 <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Authorization: Bearer <!-- --><span class="token variable simple">$CLOUDFLARE_TOKEN</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
 <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Content-Type: application/json&quot;</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">jq</span><span class="token argument"> -r</span> <!-- --><span class="token string">&#x27;{&quot;result&quot;}[] | .[0] | .id&#x27;</span><span class="token variable-symbols">)</span></span>

  <!-- --><span class="token assign-left variable">response</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -X</span> PUT <!-- --><span class="token string">&quot;https://api.cloudflare.com/client/v4/zones/<!-- --><span class="token variable simple">$ZONE_ID</span>/dns_records/<!-- --><span class="token variable simple">$DNS_RECORDIDv4</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
   <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Authorization: Bearer <!-- --><span class="token variable simple">$CLOUDFLARE_TOKEN</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
   <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Content-Type: application/json&quot;</span> <!-- --><span class="token punctuation">\</span>
   <!-- --><span class="token argument"> --data</span> <!-- --><span class="token string">&quot;{<!-- --><span class="token entity" title="\&quot;">\&quot;</span>type<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:<!-- --><span class="token entity" title="\&quot;">\&quot;</span>A<!-- --><span class="token entity" title="\&quot;">\&quot;</span>,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>name<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:<!-- --><span class="token entity" title="\&quot;">\&quot;</span><span class="token variable simple">$DNS_RECORD</span><span class="token entity" title="\&quot;">\&quot;</span>,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>content<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:<!-- --><span class="token entity" title="\&quot;">\&quot;</span><span class="token variable simple">$IPv4_ADDR</span><span class="token entity" title="\&quot;">\&quot;</span>,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>ttl<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:1,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>proxied<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:false}&quot;<!-- --></span><span class="token variable-symbols">)</span></span>

  <!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span> &quot;<!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token builtin class-name">echo</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable"><span class="token variable-symbols">${response</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">jq</span><span class="token argument"> -r</span> <!-- --><span class="token string">&#x27;.success&#x27;</span><span class="token variable-symbols">)</span></span><span class="token string">&quot; = &quot;</span>true&quot; <!-- --><span class="token punctuation">]</span>
  <!-- --><span class="token keyword">then</span>
    <!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;A    Record Updated -&gt; <!-- --><span class="token variable"><span class="token variable-symbols">${yellow</span><span class="token variable-symbols">}</span></span><span class="token variable simple">$IPv4_ADDR</span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span> <!-- --><span class="token variable"><span class="token variable-symbols">${green</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${IPv4_AGREED</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv4_RETURNED</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv4_TOTAL</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span>
    <!-- --><span class="token assign-left variable">IPv4_SUCCESS</span><span class="token operator">=</span><span class="token string">&quot;YES&quot;</span>
  <!-- --><span class="token keyword">else</span>
    <!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;A    Record Failed: <!-- --><span class="token variable"><span class="token variable-symbols">${red</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${response</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <!-- --><span class="token keyword">fi</span>

<!-- --><span class="token keyword">else</span>
	<!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;Not Enough IPv4 Addresses Agreed: <!-- --><span class="token variable"><span class="token variable-symbols">${red</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${IPv4_AGREED</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv4_RETURNED</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv4_TOTAL</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<!-- --><span class="token keyword">fi</span>

<!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span><span class="token argument"> -z</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable simple">$IPv6_ADDR</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">]</span>
<!-- --><span class="token keyword">then</span>
  <!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable"><span class="token variable-symbols">${red</span><span class="token variable-symbols">}</span></span>No IPv6 Address Found<!-- --><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<!-- --><span class="token keyword">elif</span> <!-- --><span class="token punctuation">[</span> &quot;<!-- --><span class="token variable"><span class="token variable-symbols">$((</span>IPv6_AGREED<!-- --><span class="token variable-symbols">))</span></span><span class="token string">&quot; -ge &quot;</span><span class="token variable"><span class="token variable-symbols">$((</span>IPv6_THRESHOLD<!-- --><span class="token variable-symbols">))</span></span>&quot; <!-- --><span class="token punctuation">]</span> <!-- --><span class="token comment"># Protect against poisoned data</span>
<!-- --><span class="token keyword">then</span>
	<!-- --><span class="token assign-left variable">DNS_RECORDIDv6</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span> <!-- --><span class="token string">&quot;https://api.cloudflare.com/client/v4/zones/<!-- --><span class="token variable simple">$ZONE_ID</span>/dns_records?type=AAAA&amp;name=<!-- --><span class="token variable simple">$DNS_RECORD</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
 <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Authorization: Bearer <!-- --><span class="token variable simple">$CLOUDFLARE_TOKEN</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
 <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Content-Type: application/json&quot;</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">jq</span><span class="token argument"> -r</span> <!-- --><span class="token string">&#x27;{&quot;result&quot;}[] | .[0] | .id&#x27;</span><span class="token variable-symbols">)</span></span>

  <!-- --><span class="token assign-left variable">response</span><span class="token operator">=</span><span class="token variable"><span class="token variable-symbols">$(</span><span class="token function">curl</span><span class="token argument"> -s</span><span class="token argument"> -X</span> PUT <!-- --><span class="token string">&quot;https://api.cloudflare.com/client/v4/zones/<!-- --><span class="token variable simple">$ZONE_ID</span>/dns_records/<!-- --><span class="token variable simple">$DNS_RECORDIDv6</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
   <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Authorization: Bearer <!-- --><span class="token variable simple">$CLOUDFLARE_TOKEN</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">\</span>
   <!-- --><span class="token argument"> -H</span> <!-- --><span class="token string">&quot;Content-Type: application/json&quot;</span> <!-- --><span class="token punctuation">\</span>
   <!-- --><span class="token argument"> --data</span> <!-- --><span class="token string">&quot;{<!-- --><span class="token entity" title="\&quot;">\&quot;</span>type<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:<!-- --><span class="token entity" title="\&quot;">\&quot;</span>AAAA<!-- --><span class="token entity" title="\&quot;">\&quot;</span>,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>name<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:<!-- --><span class="token entity" title="\&quot;">\&quot;</span><span class="token variable simple">$DNS_RECORD</span><span class="token entity" title="\&quot;">\&quot;</span>,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>content<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:<!-- --><span class="token entity" title="\&quot;">\&quot;</span><span class="token variable simple">$IPv6_ADDR</span><span class="token entity" title="\&quot;">\&quot;</span>,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>ttl<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:1,<!-- --><span class="token entity" title="\&quot;">\&quot;</span>proxied<!-- --><span class="token entity" title="\&quot;">\&quot;</span>:false}&quot;<!-- --></span><span class="token variable-symbols">)</span></span>

    <!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span> &quot;<!-- --><span class="token variable"><span class="token variable-symbols">$(</span><span class="token builtin class-name">echo</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable"><span class="token variable-symbols">${response</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">jq</span><span class="token argument"> -r</span> <!-- --><span class="token string">&#x27;.success&#x27;</span><span class="token variable-symbols">)</span></span><span class="token string">&quot; = &quot;</span>true&quot; <!-- --><span class="token punctuation">]</span>
    <!-- --><span class="token keyword">then</span>
    	<!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;AAAA Record Updated -&gt; <!-- --><span class="token variable"><span class="token variable-symbols">${purple</span><span class="token variable-symbols">}</span></span><span class="token variable simple">$IPv6_ADDR</span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span> <!-- --><span class="token variable"><span class="token variable-symbols">${green</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${IPv6_AGREED</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv6_RETURNED</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv6_TOTAL</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span>
      <!-- --><span class="token assign-left variable">IPv6_SUCCESS</span><span class="token operator">=</span><span class="token string">&quot;YES&quot;</span>
    <!-- --><span class="token keyword">else</span>
      <!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;AAAA Record Failed: <!-- --><span class="token variable"><span class="token variable-symbols">${red</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${response</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
    <!-- --><span class="token keyword">fi</span>
<!-- --><span class="token keyword">else</span>
	<!-- --><span class="token builtin class-name">echo</span><span class="token argument"> -e</span> <!-- --><span class="token string">&quot;Not Enough IPv6 Addresses Agreed: <!-- --><span class="token variable"><span class="token variable-symbols">${red</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${IPv6_AGREED</span><span class="token variable-symbols">}</span></span><span class="token variable"><span class="token variable-symbols">${reset</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv6_RETURNED</span><span class="token variable-symbols">}</span></span>/<!-- --><span class="token variable"><span class="token variable-symbols">${IPv6_TOTAL</span><span class="token variable-symbols">}</span></span>&quot;<!-- --></span> <!-- --><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<!-- --><span class="token keyword">fi</span>

<!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span><span class="token argument"> -n</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable simple">$IPv4_ADDR</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">]</span>
<!-- --><span class="token keyword">then</span>
  <!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span><span class="token argument"> -z</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable simple">$IPv4_SUCCESS</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">]</span>
  <!-- --><span class="token keyword">then</span>
    <!-- --><span class="token builtin class-name">exit</span> <!-- --><span class="token number">1</span>
  <!-- --><span class="token keyword">fi</span>
<!-- --><span class="token keyword">fi</span>

<!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span><span class="token argument"> -n</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable simple">$IPv6_ADDR</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">]</span>
<!-- --><span class="token keyword">then</span>
  <!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">[</span><span class="token argument"> -z</span> <!-- --><span class="token string">&quot;<!-- --><span class="token variable simple">$IPv6_SUCCESS</span>&quot;<!-- --></span> <!-- --><span class="token punctuation">]</span>
  <!-- --><span class="token keyword">then</span>
    <!-- --><span class="token builtin class-name">exit</span> <!-- --><span class="token number">1</span>
  <!-- --><span class="token keyword">fi</span>
<!-- --><span class="token keyword">fi</span>

<!-- --><span class="token builtin class-name">exit</span> <!-- --><span class="token number">0</span>
<!-- --></code></pre><!--/$--></div></article></main><footer class="styles_footer___S6qT"><p class="styles_icons__QjG6W"><a href="//unsplash.com/@re" class="styles_unsplash__08X6l" title="Unsplash"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="styles_icon__cHT3M"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg></a><a href="//github.com/reubn" class="styles_github__wPJrT" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="styles_icon__cHT3M"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a href="mailto:click.to.reveal@email.com" class="styles_mail__SVvds" title="Email"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="styles_icon__cHT3M"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="//twitter.com/reubn_" class="styles_twitter__SjH0n" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="styles_icon__cHT3M"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="//instagram.com/reubn" class="styles_instagram__xE7da" title="Instagram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132 132" width="0" height="0"><defs><linearGradient id="instagram" gradientTransform="rotate(45)"><stop offset="0" stop-color="#fd5"></stop><stop offset=".1" stop-color="#fd5"></stop><stop offset=".5" stop-color="#ff543e"></stop><stop offset="1" stop-color="#c837ab"></stop></linearGradient></defs></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="styles_icon__cHT3M"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a></p><a href="https://github.com/reubn/reuben.science/tree/main/content/snippets/cloudflare-ddns" class="styles_code__RcMRV" title="Source Code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="styles_icon__cHT3M"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a></footer></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"cloudflare-ddns","metadata":{"title":"Cloudflare Dynamic DNS","description":"Bash Script to Update Cloudflare DNS Records","emoji":"","date":"2021-07-28T00:00:00.000Z","preview":{"html":"\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable-symbols\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003ecurl\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -s\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -m\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e https://api.ipify.org\u003cspan class=\"token variable-symbols\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable-symbols\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003ecurl\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -s\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -m\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e https://ipv4.wtfismyip.com/text\u003cspan class=\"token variable-symbols\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token variable\"\u003e\u003cspan class=\"token variable-symbols\"\u003e$(\u003c/span\u003e\u003cspan class=\"token function\"\u003ecurl\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -s\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -m\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e https://api4.my-ip.io/ip\u003cspan class=\"token variable-symbols\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eDNS_RECORD\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003ereuben.science\n\u003cspan class=\"token builtin class-name\"\u003eecho\u003c/span\u003e\u003cspan class=\"token argument\"\u003e -e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A Record Updated -\u003e \u003cspan class=\"token variable simple\"\u003e$IPv4_ADDR\u003c/span\u003e\"\u003c/span\u003e\u003c/span\u003e"},"linesOfCode":143}},"__N_SSG":true},"page":"/snippets/[slug]","query":{"slug":"cloudflare-ddns"},"buildId":"6XtY5hUMv6s9W_W2fChEe","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>