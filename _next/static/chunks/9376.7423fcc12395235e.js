"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9376],{9376:function(s,e,a){a.r(e),a.d(e,{codeBlocks:function(){return c},metadata:function(){return t}});var n=a(5893),l=a(1151),c=[{language:"bash",lines:["#!/bin/bash","","# https://reuben.science","","red='\\033[1;31m'","yellow='\\033[1;33m'","green='\\033[1;32m'","purple='\\033[1;35m'","reset='\\033[0m'","","# Cloudflare Zone ID - copy from Cloudflare DNS page","ZONE_ID=979f5e5c765123d539fad5e744d3fd10","","# Full domain to be updated","DNS_RECORD=reuben.science","","# Cloudflare Token - scoped for write access to the desired Zone.Zone, Zone.DNS","CLOUDFLARE_TOKEN=6ktwpvFqyn5U0m0SBEyLt2nPQzSTLy3K_TLZVfXi","","# How many IP addresses must agree, in order for the result to be used?","IPv4_THRESHOLD=3","IPv6_THRESHOLD=3","","# Get the current external IP addresses","IPv4=(","  $(curl -s -m 4 https://api.ipify.org)","  $(curl -s -m 4 https://ipv4.wtfismyip.com/text)","  $(curl -s -m 4 https://api4.my-ip.io/ip)","  $(curl -s -m 4 https://v4.ipv6-test.com/api/myip.php)","  $(curl -s -m 4 https://ipv4.lookup.test-ipv6.com/ | jq -r '.ip')",")","","IPv6=(","  $(curl -s -m 4 https://api6.ipify.org)","  $(curl -s -m 4 https://ipv6.wtfismyip.com/text)","  $(curl -s -m 4 https://api6.my-ip.io/ip)","  $(curl -s -m 4 https://v6.ipv6-test.com/api/myip.php)","  $(curl -s -m 4 https://ipv6.lookup.test-ipv6.com/ | jq -r '.ip')",")","","# Pass Results to awk","IPv4_AWK=($(printf '%s\\n' \"${IPv4[@]}\" | awk ' \\","  BEGIN {va = 0; max = 0} \\","  max < ++c[$0] {if(length($0) != 0){max = c[$0]; addr = $0}} \\","  {if(length($0) != 0){va = ++va}} \\",'  END {print (length(addr) != 0) ? addr : "NULL", va, max, NR} \\',"'))","","IPv6_AWK=($(printf '%s\\n' \"${IPv6[@]}\" | awk ' \\","  BEGIN {va = 0; max = 0} \\","  max < ++c[$0] {if(length($0) != 0){max = c[$0]; addr = $0}} \\","  {if(length($0) != 0){va = ++va}} \\",'  END {print (length(addr) != 0) ? addr : "NULL", va, max, NR} \\',"'))","","# Get the most common value for each service, ignoring empty responses","IPv4_ADDR=${IPv4_AWK[0]/NULL/}","IPv6_ADDR=${IPv6_AWK[0]/NULL/}","","# How many services returned addresses?","IPv4_RETURNED=${IPv4_AWK[1]}","IPv6_RETURNED=${IPv6_AWK[1]}","","# How many services agreed?","IPv4_AGREED=${IPv4_AWK[2]}","IPv6_AGREED=${IPv6_AWK[2]}","","# How many services in total?","IPv4_TOTAL=${IPv4_AWK[3]}","IPv6_TOTAL=${IPv6_AWK[3]}","","# Successful?",'IPv4_SUCCESS=""','IPv6_SUCCESS=""',"",'if [ -z "$IPv4_ADDR" ]',"then",'  echo -e "${red}No IPv4 Address Found${reset}" >&2','elif [ "$((IPv4_AGREED))" -ge "$((IPv4_THRESHOLD))" ] # Protect against poisoned data',"then",'\tDNS_RECORDIDv4=$(curl -s "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records?type=A&name=$DNS_RECORD" \\','  -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','  -H "Content-Type: application/json" | jq -r \'{"result"}[] | .[0] | .id\')',"",'  response=$(curl -s -X PUT "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$DNS_RECORDIDv4" \\','    -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','    -H "Content-Type: application/json" \\','    --data "{\\"type\\":\\"A\\",\\"name\\":\\"$DNS_RECORD\\",\\"content\\":\\"$IPv4_ADDR\\",\\"ttl\\":1,\\"proxied\\":false}")',"",'  if [ "$(echo "${response}" | jq -r \'.success\')" = "true" ]',"  then",'    echo -e "A    Record Updated -> ${yellow}$IPv4_ADDR${reset} ${green}${IPv4_AGREED}${reset}/${IPv4_RETURNED}/${IPv4_TOTAL}"','    IPv4_SUCCESS="YES"',"  else",'    echo -e "A    Record Failed: ${red}${response}${reset}" >&2',"  fi","","else",'\techo -e "Not Enough IPv4 Addresses Agreed: ${red}${IPv4_AGREED}${reset}/${IPv4_RETURNED}/${IPv4_TOTAL}" >&2',"fi","",'if [ -z "$IPv6_ADDR" ]',"then",'  echo -e "${red}No IPv6 Address Found${reset}" >&2','elif [ "$((IPv6_AGREED))" -ge "$((IPv6_THRESHOLD))" ] # Protect against poisoned data',"then",'\tDNS_RECORDIDv6=$(curl -s "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records?type=AAAA&name=$DNS_RECORD" \\','  -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','  -H "Content-Type: application/json" | jq -r \'{"result"}[] | .[0] | .id\')',"",'  response=$(curl -s -X PUT "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$DNS_RECORDIDv6" \\','    -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','    -H "Content-Type: application/json" \\','    --data "{\\"type\\":\\"AAAA\\",\\"name\\":\\"$DNS_RECORD\\",\\"content\\":\\"$IPv6_ADDR\\",\\"ttl\\":1,\\"proxied\\":false}")',"",'    if [ "$(echo "${response}" | jq -r \'.success\')" = "true" ]',"    then",'    \techo -e "AAAA Record Updated -> ${purple}$IPv6_ADDR${reset} ${green}${IPv6_AGREED}${reset}/${IPv6_RETURNED}/${IPv6_TOTAL}"','      IPv6_SUCCESS="YES"',"    else",'      echo -e "AAAA Record Failed: ${red}${response}${reset}" >&2',"    fi","else",'\techo -e "Not Enough IPv6 Addresses Agreed: ${red}${IPv6_AGREED}${reset}/${IPv6_RETURNED}/${IPv6_TOTAL}" >&2',"fi","",'if [ -n "$IPv4_ADDR" ]',"then",'  if [ -z "$IPv4_SUCCESS" ]',"  then","    exit 1","  fi","fi","",'if [ -n "$IPv6_ADDR" ]',"then",'  if [ -z "$IPv6_SUCCESS" ]',"  then","    exit 1","  fi","fi","","exit 0"]}],t={title:"Cloudflare Dynamic DNS",description:"Bash Script to Update Cloudflare DNS Records",emoji:"\u26c5\ufe0f",date:"2021-07-28",preview:{language:"bash",code:'$(curl -s -m 4 https://api.ipify.org)\n$(curl -s -m 4 https://ipv4.wtfismyip.com/text)\n$(curl -s -m 4 https://api4.my-ip.io/ip)\nDNS_RECORD=reuben.science\necho -e "A Record Updated -> $IPv4_ADDR"'}};e.default=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(){var e=Object.assign({p:"p",code:"code",ul:"ul",li:"li",pre:"pre",span:"span"},(0,l.ah)(),s.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(n.Fragment,{}),"\n","\n",(0,n.jsxs)(e.p,{children:["Small ",(0,n.jsx)(e.code,{children:"bash"})," script to dynamically update Cloudflare ",(0,n.jsx)(e.code,{children:"DNS"})," records to the current external ",(0,n.jsx)(e.code,{children:"IP"})," addresses."]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Supports both ",(0,n.jsx)(e.code,{children:"IPv4"})," and ",(0,n.jsx)(e.code,{children:"IPv6"}),": ",(0,n.jsx)(e.code,{children:"A"})," and ",(0,n.jsx)(e.code,{children:"AAAA"})]}),"\n",(0,n.jsx)(e.li,{children:"Multi-source comparison (prevents against source poisoning/failure)"}),"\n",(0,n.jsx)(e.li,{children:"Cloudflare API v4"}),"\n",(0,n.jsx)(e.li,{children:"Configurable"}),"\n"]}),"\n",(0,n.jsxs)(e.pre,{children:[(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{dangerouslySetInnerHTML:{__html:'<button class="clickToCopy" onmousedown="COPY_FN(event)" onmouseup="CLEAR_FN(event)">Copy</button>'}})}),(0,n.jsxs)(e.code,{className:"language-bash",children:[(0,n.jsx)(e.span,{className:"token shebang important",children:"#!/bin/bash"}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# https://reuben.science"}),"\n\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"red"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:"'\\033[1;31m'"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"yellow"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:"'\\033[1;33m'"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"green"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:"'\\033[1;32m'"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"purple"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:"'\\033[1;35m'"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"reset"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:"'\\033[0m'"}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Cloudflare Zone ID - copy from Cloudflare DNS page"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"ZONE_ID"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),"979f5e5c765123d539fad5e744d3fd10\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Full domain to be updated"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"DNS_RECORD"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),"reuben.science\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Cloudflare Token - scoped for write access to the desired Zone.Zone, Zone.DNS"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"CLOUDFLARE_TOKEN"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),"6ktwpvFqyn5U0m0SBEyLt2nPQzSTLy3K_TLZVfXi\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# How many IP addresses must agree, in order for the result to be used?"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_THRESHOLD"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token number",children:"3"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_THRESHOLD"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token number",children:"3"}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Get the current external IP addresses"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://api.ipify.org",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://ipv4.wtfismyip.com/text",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://api4.my-ip.io/ip",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://v4.ipv6-test.com/api/myip.php",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://ipv4.lookup.test-ipv6.com/ ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"jq"}),(0,n.jsx)(e.span,{className:"token argument",children:" -r"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'.ip'"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n",(0,n.jsx)(e.span,{className:"token punctuation",children:")"}),"\n\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://api6.ipify.org",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://ipv6.wtfismyip.com/text",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://api6.my-ip.io/ip",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://v6.ipv6-test.com/api/myip.php",(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n  ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -m"})," ",(0,n.jsx)(e.span,{className:"token number",children:"4"})," https://ipv6.lookup.test-ipv6.com/ ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"jq"}),(0,n.jsx)(e.span,{className:"token argument",children:" -r"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'.ip'"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n",(0,n.jsx)(e.span,{className:"token punctuation",children:")"}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Pass Results to awk"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_AWK"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token builtin class-name",children:"printf"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'%s\\n'"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"@",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"awk"})," ' ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  BEGIN ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"va ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:";"})," max ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  max ",(0,n.jsx)(e.span,{className:"token operator",children:"<"})," ++c",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"$0",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"if",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"length",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"$0",(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,n.jsx)(e.span,{className:"token operator",children:"!="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"max ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," c",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token punctuation",children:";"})," addr ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ",(0,n.jsx)(e.span,{className:"token variable simple",children:"$0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"if",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"length",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,n.jsx)(e.span,{className:"token operator",children:"!="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:")"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"va ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ++va",(0,n.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  END ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"print ",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"length",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"addr",(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,n.jsx)(e.span,{className:"token operator",children:"!="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ? addr : ",(0,n.jsx)(e.span,{className:"token string",children:'"NULL"'}),", va, max, NR",(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n'",(0,n.jsx)(e.span,{className:"token punctuation",children:"))"}),"\n\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_AWK"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token builtin class-name",children:"printf"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'%s\\n'"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"@",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"awk"})," ' ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  BEGIN ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"va ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:";"})," max ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  max ",(0,n.jsx)(e.span,{className:"token operator",children:"<"})," ++c",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"$0",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"if",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"length",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"$0",(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,n.jsx)(e.span,{className:"token operator",children:"!="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"max ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," c",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token punctuation",children:";"})," addr ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ",(0,n.jsx)(e.span,{className:"token variable simple",children:"$0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"if",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"length",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,n.jsx)(e.span,{className:"token operator",children:"!="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:")"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"va ",(0,n.jsx)(e.span,{className:"token operator",children:"="})," ++va",(0,n.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n  END ",(0,n.jsx)(e.span,{className:"token punctuation",children:"{"}),"print ",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"length",(0,n.jsx)(e.span,{className:"token punctuation",children:"("}),"addr",(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,n.jsx)(e.span,{className:"token operator",children:"!="})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),(0,n.jsx)(e.span,{className:"token punctuation",children:")"})," ? addr : ",(0,n.jsx)(e.span,{className:"token string",children:'"NULL"'}),", va, max, NR",(0,n.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n'",(0,n.jsx)(e.span,{className:"token punctuation",children:"))"}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Get the most common value for each service, ignoring empty responses"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_ADDR"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"0",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token operator",children:"/"}),"NULL",(0,n.jsx)(e.span,{className:"token operator",children:"/"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_ADDR"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"0",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token operator",children:"/"}),"NULL",(0,n.jsx)(e.span,{className:"token operator",children:"/"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# How many services returned addresses?"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_RETURNED"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"1",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_RETURNED"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"1",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# How many services agreed?"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_AGREED"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"2",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_AGREED"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"2",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# How many services in total?"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_TOTAL"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"3",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_TOTAL"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_AWK"}),(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),"3",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"\n\n",(0,n.jsx)(e.span,{className:"token comment",children:"# Successful?"}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_SUCCESS"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:'""'}),"\n",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_SUCCESS"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:'""'}),"\n\n",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token argument",children:" -z"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv4_ADDR"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n  ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${red"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"No IPv4 Address Found",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:">"}),(0,n.jsx)(e.span,{className:"token file-descriptor important",children:"&2"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"elif"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),' "',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$(("}),"IPv4_AGREED",(0,n.jsx)(e.span,{className:"token variable-symbols",children:"))"})]}),(0,n.jsx)(e.span,{className:"token string",children:'" -ge "'}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$(("}),"IPv4_THRESHOLD",(0,n.jsx)(e.span,{className:"token variable-symbols",children:"))"})]}),'" ',(0,n.jsx)(e.span,{className:"token punctuation",children:"]"})," ",(0,n.jsx)(e.span,{className:"token comment",children:"# Protect against poisoned data"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n\t",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"DNS_RECORDIDv4"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"https://api.cloudflare.com/client/v4/zones/',(0,n.jsx)(e.span,{className:"token variable simple",children:"$ZONE_ID"}),"/dns_records?type=A&name=",(0,n.jsx)(e.span,{className:"token variable simple",children:"$DNS_RECORD"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"Authorization: Bearer ',(0,n.jsx)(e.span,{className:"token variable simple",children:"$CLOUDFLARE_TOKEN"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsx)(e.span,{className:"token string",children:'"Content-Type: application/json"'})," ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"jq"}),(0,n.jsx)(e.span,{className:"token argument",children:" -r"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'{\"result\"}[] | .[0] | .id'"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n\n  ",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"response"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -X"})," PUT ",(0,n.jsxs)(e.span,{className:"token string",children:['"https://api.cloudflare.com/client/v4/zones/',(0,n.jsx)(e.span,{className:"token variable simple",children:"$ZONE_ID"}),"/dns_records/",(0,n.jsx)(e.span,{className:"token variable simple",children:"$DNS_RECORDIDv4"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n   ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"Authorization: Bearer ',(0,n.jsx)(e.span,{className:"token variable simple",children:"$CLOUDFLARE_TOKEN"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n   ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsx)(e.span,{className:"token string",children:'"Content-Type: application/json"'})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n   ",(0,n.jsx)(e.span,{className:"token argument",children:" --data"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"{',(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"type",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"A",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),",",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"name",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$DNS_RECORD"}),(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),",",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"content",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv4_ADDR"}),(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),",",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"ttl",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":1,",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"proxied",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),':false}"']}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),' "',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${response"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"jq"}),(0,n.jsx)(e.span,{className:"token argument",children:" -r"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'.success'"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),(0,n.jsx)(e.span,{className:"token string",children:'" = "'}),'true" ',(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n    ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"A    Record Updated -> ',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${yellow"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv4_ADDR"}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]})," ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${green"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_AGREED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_RETURNED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_TOTAL"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']}),"\n    ",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv4_SUCCESS"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:'"YES"'}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"else"}),"\n    ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"A    Record Failed: ',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${red"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${response"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:">"}),(0,n.jsx)(e.span,{className:"token file-descriptor important",children:"&2"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n\n",(0,n.jsx)(e.span,{className:"token keyword",children:"else"}),"\n\t",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"Not Enough IPv4 Addresses Agreed: ',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${red"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_AGREED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_RETURNED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv4_TOTAL"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:">"}),(0,n.jsx)(e.span,{className:"token file-descriptor important",children:"&2"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n\n",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token argument",children:" -z"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv6_ADDR"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n  ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${red"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"No IPv6 Address Found",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:">"}),(0,n.jsx)(e.span,{className:"token file-descriptor important",children:"&2"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"elif"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),' "',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$(("}),"IPv6_AGREED",(0,n.jsx)(e.span,{className:"token variable-symbols",children:"))"})]}),(0,n.jsx)(e.span,{className:"token string",children:'" -ge "'}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$(("}),"IPv6_THRESHOLD",(0,n.jsx)(e.span,{className:"token variable-symbols",children:"))"})]}),'" ',(0,n.jsx)(e.span,{className:"token punctuation",children:"]"})," ",(0,n.jsx)(e.span,{className:"token comment",children:"# Protect against poisoned data"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n\t",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"DNS_RECORDIDv6"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"https://api.cloudflare.com/client/v4/zones/',(0,n.jsx)(e.span,{className:"token variable simple",children:"$ZONE_ID"}),"/dns_records?type=AAAA&name=",(0,n.jsx)(e.span,{className:"token variable simple",children:"$DNS_RECORD"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"Authorization: Bearer ',(0,n.jsx)(e.span,{className:"token variable simple",children:"$CLOUDFLARE_TOKEN"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsx)(e.span,{className:"token string",children:'"Content-Type: application/json"'})," ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"jq"}),(0,n.jsx)(e.span,{className:"token argument",children:" -r"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'{\"result\"}[] | .[0] | .id'"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n\n  ",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"response"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token function",children:"curl"}),(0,n.jsx)(e.span,{className:"token argument",children:" -s"}),(0,n.jsx)(e.span,{className:"token argument",children:" -X"})," PUT ",(0,n.jsxs)(e.span,{className:"token string",children:['"https://api.cloudflare.com/client/v4/zones/',(0,n.jsx)(e.span,{className:"token variable simple",children:"$ZONE_ID"}),"/dns_records/",(0,n.jsx)(e.span,{className:"token variable simple",children:"$DNS_RECORDIDv6"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n   ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"Authorization: Bearer ',(0,n.jsx)(e.span,{className:"token variable simple",children:"$CLOUDFLARE_TOKEN"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n   ",(0,n.jsx)(e.span,{className:"token argument",children:" -H"})," ",(0,n.jsx)(e.span,{className:"token string",children:'"Content-Type: application/json"'})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n   ",(0,n.jsx)(e.span,{className:"token argument",children:" --data"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"{',(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"type",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"AAAA",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),",",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"name",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$DNS_RECORD"}),(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),",",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"content",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv6_ADDR"}),(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),",",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"ttl",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),":1,",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),"proxied",(0,n.jsx)(e.span,{className:"token entity",title:'\\"',children:'\\"'}),':false}"']}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),"\n\n    ",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),' "',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"$("}),(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${response"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,n.jsx)(e.span,{className:"token function",children:"jq"}),(0,n.jsx)(e.span,{className:"token argument",children:" -r"})," ",(0,n.jsx)(e.span,{className:"token string",children:"'.success'"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:")"})]}),(0,n.jsx)(e.span,{className:"token string",children:'" = "'}),'true" ',(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n    ",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n    \t",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"AAAA Record Updated -> ',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${purple"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv6_ADDR"}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]})," ",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${green"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_AGREED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_RETURNED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_TOTAL"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']}),"\n      ",(0,n.jsx)(e.span,{className:"token assign-left variable",children:"IPv6_SUCCESS"}),(0,n.jsx)(e.span,{className:"token operator",children:"="}),(0,n.jsx)(e.span,{className:"token string",children:'"YES"'}),"\n    ",(0,n.jsx)(e.span,{className:"token keyword",children:"else"}),"\n      ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"AAAA Record Failed: ',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${red"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${response"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:">"}),(0,n.jsx)(e.span,{className:"token file-descriptor important",children:"&2"}),"\n    ",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"else"}),"\n\t",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"echo"}),(0,n.jsx)(e.span,{className:"token argument",children:" -e"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"Not Enough IPv6 Addresses Agreed: ',(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${red"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_AGREED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${reset"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_RETURNED"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),"/",(0,n.jsxs)(e.span,{className:"token variable",children:[(0,n.jsx)(e.span,{className:"token variable-symbols",children:"${IPv6_TOTAL"}),(0,n.jsx)(e.span,{className:"token variable-symbols",children:"}"})]}),'"']})," ",(0,n.jsx)(e.span,{className:"token operator",children:">"}),(0,n.jsx)(e.span,{className:"token file-descriptor important",children:"&2"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n\n",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token argument",children:" -n"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv4_ADDR"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token argument",children:" -z"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv4_SUCCESS"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n    ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"exit"})," ",(0,n.jsx)(e.span,{className:"token number",children:"1"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n\n",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token argument",children:" -n"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv6_ADDR"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"["}),(0,n.jsx)(e.span,{className:"token argument",children:" -z"})," ",(0,n.jsxs)(e.span,{className:"token string",children:['"',(0,n.jsx)(e.span,{className:"token variable simple",children:"$IPv6_SUCCESS"}),'"']})," ",(0,n.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"then"}),"\n    ",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"exit"})," ",(0,n.jsx)(e.span,{className:"token number",children:"1"}),"\n  ",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n",(0,n.jsx)(e.span,{className:"token keyword",children:"fi"}),"\n\n",(0,n.jsx)(e.span,{className:"token builtin class-name",children:"exit"})," ",(0,n.jsx)(e.span,{className:"token number",children:"0"}),"\n"]})]})]})},a=Object.assign({},(0,l.ah)(),s.components),c=a.wrapper;return c?(0,n.jsx)(c,Object.assign({},s,{children:(0,n.jsx)(e,{})})):e()}},1151:function(s,e,a){a.d(e,{ah:function(){return c}});var n=a(7294);const l=n.createContext({});function c(s){const e=n.useContext(l);return n.useMemo((()=>"function"===typeof s?s(e):{...e,...s}),[e,s])}}}]);