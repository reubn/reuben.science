(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{3905:function(a,e,n){"use strict";n.d(e,{kt:function(){return c}});var s=n(67294);function t(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function p(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.push.apply(n,s)}return n}function m(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){t(a,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))}))}return a}function o(a,e){if(null==a)return{};var n,s,t=function(a,e){if(null==a)return{};var n,s,t={},p=Object.keys(a);for(s=0;s<p.length;s++)n=p[s],e.indexOf(n)>=0||(t[n]=a[n]);return t}(a,e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(a);for(s=0;s<p.length;s++)n=p[s],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}var r=s.createContext({}),N=function(a){var e=s.useContext(r),n=e;return a&&(n="function"===typeof a?a(e):m(m({},e),a)),n},k={inlineCode:"code",wrapper:function(a){var e=a.children;return s.createElement(s.Fragment,{},e)}},l=s.forwardRef((function(a,e){var n=a.components,t=a.mdxType,p=a.originalType,r=a.parentName,l=o(a,["components","mdxType","originalType","parentName"]),c=N(n),i=t,u=c["".concat(r,".").concat(i)]||c[i]||k[i]||p;return n?s.createElement(u,m(m({ref:e},l),{},{components:n})):s.createElement(u,m({ref:e},l))}));function c(a,e){var n=arguments,t=e&&e.mdxType;if("string"===typeof a||t){var p=n.length,m=new Array(p);m[0]=l;var o={};for(var r in e)hasOwnProperty.call(e,r)&&(o[r]=e[r]);o.originalType=a,o.mdxType="string"===typeof a?a:t,m[1]=o;for(var N=2;N<p;N++)m[N]=n[N];return s.createElement.apply(null,m)}return s.createElement.apply(null,n)}l.displayName="MDXCreateElement"},57960:function(a,e,n){"use strict";n.r(e),n.d(e,{codeBlocks:function(){return r},metadata:function(){return N},default:function(){return l}});var s=n(96156),t=n(17375),p=(n(67294),n(3905));function m(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.push.apply(n,s)}return n}function o(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,s.Z)(a,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))}))}return a}var r=[{language:"bash",lines:["#!/bin/bash","","# https://reuben.science","","red='\\033[1;31m'","yellow='\\033[1;33m'","green='\\033[1;32m'","purple='\\033[1;35m'","reset='\\033[0m'","","# Cloudflare Zone ID - copy from Cloudflare DNS page","ZONE_ID=979f5e5c765123d539fad5e744d3fd10","","# Full domain to be updated","DNS_RECORD=reuben.science","","# Cloudflare Token - scoped for write access to the desired Zone.Zone, Zone.DNS","CLOUDFLARE_TOKEN=6ktwpvFqyn5U0m0SBEyLt2nPQzSTLy3K_TLZVfXi","","# How many IP addresses must agree, in order for the result to be used?","IPv4_THRESHOLD=3","IPv6_THRESHOLD=3","","# Get the current external IP addresses","IPv4=(","  $(curl -s -m 4 https://api.ipify.org)","  $(curl -s -m 4 https://ipv4.wtfismyip.com/text)","  $(curl -s -m 4 https://api4.my-ip.io/ip)","  $(curl -s -m 4 https://v4.ipv6-test.com/api/myip.php)","  $(curl -s -m 4 https://ipv4.lookup.test-ipv6.com/ | jq -r '.ip')",")","","IPv6=(","  $(curl -s -m 4 https://api6.ipify.org)","  $(curl -s -m 4 https://ipv6.wtfismyip.com/text)","  $(curl -s -m 4 https://api6.my-ip.io/ip)","  $(curl -s -m 4 https://v6.ipv6-test.com/api/myip.php)","  $(curl -s -m 4 https://ipv6.lookup.test-ipv6.com/ | jq -r '.ip')",")","","# Pass Results to awk","IPv4_AWK=($(printf '%s\\n' \"${IPv4[@]}\" | awk ' \\","  BEGIN {va = 0; max = 0} \\","  max < ++c[$0] {if(length($0) != 0){max = c[$0]; addr = $0}} \\","  {if(length($0) != 0){va = ++va}} \\",'  END {print (length(addr) != 0) ? addr : "NULL", va, max, NR} \\',"'))","","IPv6_AWK=($(printf '%s\\n' \"${IPv6[@]}\" | awk ' \\","  BEGIN {va = 0; max = 0} \\","  max < ++c[$0] {if(length($0) != 0){max = c[$0]; addr = $0}} \\","  {if(length($0) != 0){va = ++va}} \\",'  END {print (length(addr) != 0) ? addr : "NULL", va, max, NR} \\',"'))","","# Get the most common value for each service, ignoring empty responses","IPv4_ADDR=${IPv4_AWK[0]/NULL/}","IPv6_ADDR=${IPv6_AWK[0]/NULL/}","","# How many services returned addresses?","IPv4_RETURNED=${IPv4_AWK[1]}","IPv6_RETURNED=${IPv6_AWK[1]}","","# How many services agreed?","IPv4_AGREED=${IPv4_AWK[2]}","IPv6_AGREED=${IPv6_AWK[2]}","","# How many services in total?","IPv4_TOTAL=${IPv4_AWK[3]}","IPv6_TOTAL=${IPv6_AWK[3]}","","# Successful?",'IPv4_SUCCESS=""','IPv6_SUCCESS=""',"",'if [ -z "$IPv4_ADDR" ]',"then",'  echo -e "${red}No IPv4 Address Found${reset}" >&2','elif [ "$((IPv4_AGREED))" -ge "$((IPv4_THRESHOLD))" ] # Protect against poisoned data',"then",'\tDNS_RECORDIDv4=$(curl -s "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records?type=A&name=$DNS_RECORD" \\','  -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','  -H "Content-Type: application/json" | jq -r \'{"result"}[] | .[0] | .id\')',"",'  response=$(curl -s -X PUT "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$DNS_RECORDIDv4" \\','    -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','    -H "Content-Type: application/json" \\','    --data "{\\"type\\":\\"A\\",\\"name\\":\\"$DNS_RECORD\\",\\"content\\":\\"$IPv4_ADDR\\",\\"ttl\\":1,\\"proxied\\":false}")',"",'  if [ "$(echo "${response}" | jq -r \'.success\')" = "true" ]',"  then",'    echo -e "A    Record Updated -> ${yellow}$IPv4_ADDR${reset} ${green}${IPv4_AGREED}${reset}/${IPv4_RETURNED}/${IPv4_TOTAL}"','    IPv4_SUCCESS="YES"',"  else",'    echo -e "A    Record Failed: ${red}${response}${reset}" >&2',"  fi","","else",'\techo -e "Not Enough IPv4 Addresses Agreed: ${red}${IPv4_AGREED}${reset}/${IPv4_RETURNED}/${IPv4_TOTAL}" >&2',"fi","",'if [ -z "$IPv6_ADDR" ]',"then",'  echo -e "${red}No IPv6 Address Found${reset}" >&2','elif [ "$((IPv6_AGREED))" -ge "$((IPv6_THRESHOLD))" ] # Protect against poisoned data',"then",'\tDNS_RECORDIDv6=$(curl -s "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records?type=AAAA&name=$DNS_RECORD" \\','  -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','  -H "Content-Type: application/json" | jq -r \'{"result"}[] | .[0] | .id\')',"",'  response=$(curl -s -X PUT "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$DNS_RECORDIDv6" \\','    -H "Authorization: Bearer $CLOUDFLARE_TOKEN" \\','    -H "Content-Type: application/json" \\','    --data "{\\"type\\":\\"AAAA\\",\\"name\\":\\"$DNS_RECORD\\",\\"content\\":\\"$IPv6_ADDR\\",\\"ttl\\":1,\\"proxied\\":false}")',"",'    if [ "$(echo "${response}" | jq -r \'.success\')" = "true" ]',"    then",'    \techo -e "AAAA Record Updated -> ${purple}$IPv6_ADDR${reset} ${green}${IPv6_AGREED}${reset}/${IPv6_RETURNED}/${IPv6_TOTAL}"','      IPv6_SUCCESS="YES"',"    else",'      echo -e "AAAA Record Failed: ${red}${response}${reset}" >&2',"    fi","else",'\techo -e "Not Enough IPv6 Addresses Agreed: ${red}${IPv6_AGREED}${reset}/${IPv6_RETURNED}/${IPv6_TOTAL}" >&2',"fi","",'if [ -n "$IPv4_ADDR" ]',"then",'  if [ -z "$IPv4_SUCCESS" ]',"  then","    exit 1","  fi","fi","",'if [ -n "$IPv6_ADDR" ]',"then",'  if [ -z "$IPv6_SUCCESS" ]',"  then","    exit 1","  fi","fi","","exit 0"]}],N={title:"Cloudflare Dynamic DNS",description:"Bash Script to Update Cloudflare DNS Records",emoji:"\u26c5\ufe0f",date:"2021-07-28",preview:{language:"bash",code:'$(curl -s -m 4 https://api.ipify.org)\n$(curl -s -m 4 https://ipv4.wtfismyip.com/text)\n$(curl -s -m 4 https://api4.my-ip.io/ip)\nDNS_RECORD=reuben.science\necho -e "A Record Updated -> $IPv4_ADDR"'}},k={codeBlocks:r,metadata:N};function l(a){var e=a.components,n=(0,t.Z)(a,["components"]);return(0,p.kt)("wrapper",o(o(o({},k),n),{},{components:e,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"Small ",(0,p.kt)("inlineCode",{parentName:"p"},"bash")," script to dynamically update Cloudflare ",(0,p.kt)("inlineCode",{parentName:"p"},"DNS")," records to the current external ",(0,p.kt)("inlineCode",{parentName:"p"},"IP")," addresses."),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"Supports both ",(0,p.kt)("inlineCode",{parentName:"li"},"IPv4")," and ",(0,p.kt)("inlineCode",{parentName:"li"},"IPv6"),": ",(0,p.kt)("inlineCode",{parentName:"li"},"A")," and ",(0,p.kt)("inlineCode",{parentName:"li"},"AAAA")),(0,p.kt)("li",{parentName:"ul"},"Multi-source comparison (prevents against source poisoning/failure)"),(0,p.kt)("li",{parentName:"ul"},"Cloudflare API v4"),(0,p.kt)("li",{parentName:"ul"},"Configurable")),(0,p.kt)("pre",null,(0,p.kt)("span",o({parentName:"pre"},{dangerouslySetInnerHTML:{__html:'<button class="clickToCopy" onmousedown="COPY_FN(event)" onmouseup="CLEAR_FN(event)">Copy</button>'}})),(0,p.kt)("code",o({parentName:"pre"},{className:"language-bash"}),(0,p.kt)("span",o({parentName:"code"},{className:"token shebang important"}),"#!/bin/bash"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# https://reuben.science"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"red"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),"'\\033[1;31m'"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"yellow"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),"'\\033[1;33m'"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"green"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),"'\\033[1;32m'"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"purple"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),"'\\033[1;35m'"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"reset"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),"'\\033[0m'"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Cloudflare Zone ID - copy from Cloudflare DNS page"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"ZONE_ID"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),"979f5e5c765123d539fad5e744d3fd10\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Full domain to be updated"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"DNS_RECORD"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),"reuben.science\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Cloudflare Token - scoped for write access to the desired Zone.Zone, Zone.DNS"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"CLOUDFLARE_TOKEN"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),"6ktwpvFqyn5U0m0SBEyLt2nPQzSTLy3K_TLZVfXi\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# How many IP addresses must agree, in order for the result to be used?"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_THRESHOLD"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"3"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_THRESHOLD"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"3"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Get the current external IP addresses"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://api.ipify.org",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://ipv4.wtfismyip.com/text",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://api4.my-ip.io/ip",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://v4.ipv6-test.com/api/myip.php",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://ipv4.lookup.test-ipv6.com/ ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"jq"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -r")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'.ip'"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://api6.ipify.org",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://ipv6.wtfismyip.com/text",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://api6.my-ip.io/ip",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://v6.ipv6-test.com/api/myip.php",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -m")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"4")," https://ipv6.lookup.test-ipv6.com/ ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"jq"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -r")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'.ip'"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Pass Results to awk"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_AWK"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token builtin class-name"}),"printf")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'%s\\n'")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"@",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"awk")," ' ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n  BEGIN ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"{"),"va ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"=")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),";")," max ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"=")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n  max ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"<")," ++c",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"$0",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"{"),"if",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"("),"length",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"("),"$0",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),")")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"!=")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"max ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"=")," c",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token variable simple"}),"$0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),";")," addr ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"=")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable simple"}),"$0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"\\"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"if",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"length",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),(0,p.kt)("span",o({parentName:"code"},{className:"token variable simple"}),"$0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"!=")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"va ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"=")," ++va",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"\\"),"\n  END ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"print ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"length",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"addr",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"!=")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ? addr : ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"NULL"'),", va, max, NR",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"\\"),"\n'",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"))"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_AWK"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token builtin class-name"}),"printf")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'%s\\n'")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"@",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"awk")," ' ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n  BEGIN ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"{"),"va ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"=")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),";")," max ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"=")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n  max ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"<")," ++c",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"$0",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"{"),"if",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"("),"length",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"("),"$0",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),")")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"!=")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"max ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"=")," c",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token variable simple"}),"$0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),";")," addr ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"=")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token variable simple"}),"$0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"\\"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"if",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"length",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),(0,p.kt)("span",o({parentName:"code"},{className:"token variable simple"}),"$0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"!=")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"va ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"=")," ++va",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"\\"),"\n  END ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"print ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"length",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"addr",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"!=")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"0"),(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ? addr : ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"NULL"'),", va, max, NR",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"\\"),"\n'",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"))"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Get the most common value for each service, ignoring empty responses"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_ADDR"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"0",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"/"),"NULL",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"/"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_ADDR"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"0",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"/"),"NULL",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"/"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# How many services returned addresses?"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_RETURNED"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"1",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_RETURNED"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"1",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# How many services agreed?"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_AGREED"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"2",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_AGREED"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"2",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# How many services in total?"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_TOTAL"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"3",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_TOTAL"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_AWK"),(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"["),"3",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"]"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Successful?"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_SUCCESS"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'""'),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_SUCCESS"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'""'),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -z")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv4_ADDR"),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${red"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"No IPv4 Address Found",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),">"),(0,p.kt)("span",o({parentName:"code"},{className:"token file-descriptor important"}),"&2"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"elif")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),' "',(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$(("),"IPv4_AGREED",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"))")),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'" -ge "'),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$(("),"IPv4_THRESHOLD",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"))")),'" ',(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Protect against poisoned data"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"DNS_RECORDIDv4"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"https://api.cloudflare.com/client/v4/zones/',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$ZONE_ID"),"/dns_records?type=A&name=",(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$DNS_RECORD"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Authorization: Bearer ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$CLOUDFLARE_TOKEN"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Content-Type: application/json"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"jq"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -r")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'{\"result\"}[] | .[0] | .id'"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"response"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -X")," PUT ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"https://api.cloudflare.com/client/v4/zones/',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$ZONE_ID"),"/dns_records/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$DNS_RECORDIDv4"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n   ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Authorization: Bearer ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$CLOUDFLARE_TOKEN"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n   ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Content-Type: application/json"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n   ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," --data")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"{',(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"type",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"A",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),",",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"name",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$DNS_RECORD"),(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),",",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"content",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv4_ADDR"),(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),",",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"ttl",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":1,",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"proxied",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),':false}"'),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),' "',(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token builtin class-name"}),"echo")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${response"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"jq"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -r")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'.success'"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'" = "'),'true" ',(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"A    Record Updated -> ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${yellow"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv4_ADDR"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}"))," ",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${green"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_AGREED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_RETURNED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_TOTAL"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"'),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv4_SUCCESS"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"YES"'),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"else"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"A    Record Failed: ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${red"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${response"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),">"),(0,p.kt)("span",o({parentName:"code"},{className:"token file-descriptor important"}),"&2"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"else"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"Not Enough IPv4 Addresses Agreed: ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${red"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_AGREED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_RETURNED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv4_TOTAL"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),">"),(0,p.kt)("span",o({parentName:"code"},{className:"token file-descriptor important"}),"&2"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -z")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv6_ADDR"),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${red"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"No IPv6 Address Found",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),">"),(0,p.kt)("span",o({parentName:"code"},{className:"token file-descriptor important"}),"&2"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"elif")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),' "',(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$(("),"IPv6_AGREED",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"))")),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'" -ge "'),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$(("),"IPv6_THRESHOLD",(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"))")),'" ',(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token comment"}),"# Protect against poisoned data"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"DNS_RECORDIDv6"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"https://api.cloudflare.com/client/v4/zones/',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$ZONE_ID"),"/dns_records?type=AAAA&name=",(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$DNS_RECORD"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Authorization: Bearer ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$CLOUDFLARE_TOKEN"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Content-Type: application/json"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"jq"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -r")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'{\"result\"}[] | .[0] | .id'"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"response"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"curl"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -s"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -X")," PUT ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"https://api.cloudflare.com/client/v4/zones/',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$ZONE_ID"),"/dns_records/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$DNS_RECORDIDv6"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n   ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Authorization: Bearer ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$CLOUDFLARE_TOKEN"),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n   ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -H")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"Content-Type: application/json"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token punctuation"}),"\\"),"\n   ",(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," --data")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"{',(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"type",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"AAAA",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),",",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"name",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$DNS_RECORD"),(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),",",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"content",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv6_ADDR"),(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),",",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"ttl",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),":1,",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),"proxied",(0,p.kt)("span",o({parentName:"span"},{className:"token entity",title:'\\"'}),'\\"'),':false}"'),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),"\n\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),' "',(0,p.kt)("span",o({parentName:"code"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"$("),(0,p.kt)("span",o({parentName:"span"},{className:"token builtin class-name"}),"echo")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${response"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"span"},{className:"token operator"}),"|")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token function"}),"jq"),(0,p.kt)("span",o({parentName:"span"},{className:"token argument"})," -r")," ",(0,p.kt)("span",o({parentName:"span"},{className:"token string"}),"'.success'"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),")")),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'" = "'),'true" ',(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n        ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"AAAA Record Updated -> ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${purple"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv6_ADDR"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}"))," ",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${green"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_AGREED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_RETURNED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_TOTAL"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"'),"\n      ",(0,p.kt)("span",o({parentName:"code"},{className:"token assign-left variable"}),"IPv6_SUCCESS"),(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),"="),(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"YES"'),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"else"),"\n      ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"AAAA Record Failed: ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${red"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${response"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),">"),(0,p.kt)("span",o({parentName:"code"},{className:"token file-descriptor important"}),"&2"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"else"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"echo"),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -e")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"Not Enough IPv6 Addresses Agreed: ',(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${red"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_AGREED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${reset"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_RETURNED"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),"/",(0,p.kt)("span",o({parentName:"span"},{className:"token variable"}),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"${IPv6_TOTAL"),(0,p.kt)("span",o({parentName:"span"},{className:"token variable-symbols"}),"}")),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token operator"}),">"),(0,p.kt)("span",o({parentName:"code"},{className:"token file-descriptor important"}),"&2"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -n")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv4_ADDR"),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -z")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv4_SUCCESS"),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"exit")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"1"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -n")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv6_ADDR"),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"["),(0,p.kt)("span",o({parentName:"code"},{className:"token argument"})," -z")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token string"}),'"',(0,p.kt)("span",o({parentName:"span"},{className:"token variable simple"}),"$IPv6_SUCCESS"),'"')," ",(0,p.kt)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"then"),"\n    ",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"exit")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"1"),"\n  ",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n",(0,p.kt)("span",o({parentName:"code"},{className:"token keyword"}),"fi"),"\n\n",(0,p.kt)("span",o({parentName:"code"},{className:"token builtin class-name"}),"exit")," ",(0,p.kt)("span",o({parentName:"code"},{className:"token number"}),"0"),"\n")))}l.isMDXComponent=!0}}]);