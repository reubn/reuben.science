"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[215],{3905:function(e,a,n){n.d(a,{kt:function(){return k}});var t=n(67294);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function p(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?p(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function r(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},p=Object.keys(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=t.createContext({}),m=function(e){var a=t.useContext(c),n=a;return e&&(n="function"===typeof e?e(a):s(s({},a),e)),n},l={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,o=e.mdxType,p=e.originalType,c=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),k=m(n),N=o,i=k["".concat(c,".").concat(N)]||k[N]||l[N]||p;return n?t.createElement(i,s(s({ref:a},u),{},{components:n})):t.createElement(i,s({ref:a},u))}));function k(e,a){var n=arguments,o=a&&a.mdxType;if("string"===typeof e||o){var p=n.length,s=new Array(p);s[0]=u;var r={};for(var c in a)hasOwnProperty.call(a,c)&&(r[c]=a[c]);r.originalType=e,r.mdxType="string"===typeof e?e:o,s[1]=r;for(var m=2;m<p;m++)s[m]=n[m];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},64215:function(e,a,n){n.r(a),n.d(a,{codeBlocks:function(){return r},metadata:function(){return c},default:function(){return l}});var t=n(87462),o=n(44925),p=(n(67294),n(3905)),s=["components"],r=[{language:"js",lines:["webpack: (config, {buildId, dev, isServer, defaultLoaders, webpack}) => {","","  ...","","  config.module.rules.forEach(({oneOf}) => oneOf?.forEach(({use}) => {","    use?.forEach?.(({options: {modules}}) => {","      if(modules?.getLocalIdent) {","        delete modules.getLocalIdent","        modules.localIdentName = '[hash:base64:4]'","      }","    })","  }))","","  ...","","  return config","}"]}],c={title:"Next.js Custom 'localIdentName'",description:"Set webpack css-loader 'localIdentName' in Next.js",emoji:"\ud83d\udd3c",date:"2021-08-04",preview:{lines:{from:2}}},m={codeBlocks:r,metadata:c};function l(e){var a=e.components,n=(0,o.Z)(e,s);return(0,p.kt)("wrapper",(0,t.Z)({},m,n,{components:a,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"Place this inside the ",(0,p.kt)("inlineCode",{parentName:"p"},"webpack")," function in the ",(0,p.kt)("inlineCode",{parentName:"p"},"next.config.js")," file to patch the ",(0,p.kt)("inlineCode",{parentName:"p"},"localIdentName")," used by ",(0,p.kt)("inlineCode",{parentName:"p"},"css-loader")," for CSS Modules by ",(0,p.kt)("inlineCode",{parentName:"p"},"Next.js"),"."),(0,p.kt)("pre",null,(0,p.kt)("span",{parentName:"pre",dangerouslySetInnerHTML:{__html:'<button class="clickToCopy" onmousedown="COPY_FN(event)" onmouseup="CLEAR_FN(event)">Copy</button>'}}),(0,p.kt)("code",{parentName:"pre",className:"language-js"},(0,p.kt)("span",{parentName:"code",className:"token function-variable function"},"webpack"),(0,p.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token parameter"},"config",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"buildId",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},",")," dev",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},",")," isServer",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},",")," defaultLoaders",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},",")," webpack",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"}")),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,p.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n  ",(0,p.kt)("span",{parentName:"code",className:"token spread operator"},"..."),"\n\n  config",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,p.kt)("span",{parentName:"code",className:"token property-access"},"module"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,p.kt)("span",{parentName:"code",className:"token property-access"},"rules"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,p.kt)("span",{parentName:"code",className:"token method function property-access"},"forEach"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token parameter"},(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"oneOf",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"}")),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,p.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," oneOf",(0,p.kt)("span",{parentName:"code",className:"token operator"},"?."),(0,p.kt)("span",{parentName:"code",className:"token method function property-access"},"forEach"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token parameter"},(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"use",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"}")),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,p.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    use",(0,p.kt)("span",{parentName:"code",className:"token operator"},"?."),"forEach",(0,p.kt)("span",{parentName:"code",className:"token operator"},"?."),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,p.kt)("span",{parentName:"code",className:"token parameter"},(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"options",(0,p.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"modules",(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,p.kt)("span",{parentName:"span",className:"token punctuation"},"}")),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,p.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,p.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"("),"modules",(0,p.kt)("span",{parentName:"code",className:"token operator"},"?."),"getLocalIdent",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,p.kt)("span",{parentName:"code",className:"token keyword"},"delete")," modules",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,p.kt)("span",{parentName:"code",className:"token property-access"},"getLocalIdent"),"\n        modules",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,p.kt)("span",{parentName:"code",className:"token property-access"},"localIdentName")," ",(0,p.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,p.kt)("span",{parentName:"code",className:"token string"},"'[hash:base64:4]'"),"\n      ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,p.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n  ",(0,p.kt)("span",{parentName:"code",className:"token spread operator"},"..."),"\n\n  ",(0,p.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," config\n",(0,p.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,p.kt)("p",null,"This can be scoped to ",(0,p.kt)("strong",{parentName:"p"},"production")," builds by testing for the ",(0,p.kt)("inlineCode",{parentName:"p"},"dev")," argument."),(0,p.kt)("p",null,"Tested ",(0,p.kt)("inlineCode",{parentName:"p"},"Next.js")," ",(0,p.kt)("inlineCode",{parentName:"p"},"v11.0.1"),", ",(0,p.kt)("inlineCode",{parentName:"p"},"webpack")," ",(0,p.kt)("inlineCode",{parentName:"p"},"v5.47.0")))}l.isMDXComponent=!0},87462:function(e,a,n){function t(){return(t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}n.d(a,{Z:function(){return t}})}}]);